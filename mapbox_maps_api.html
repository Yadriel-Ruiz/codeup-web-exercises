<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Map Box Exercise</title>
    <script src='https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.css' rel='stylesheet'/>
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>
    <link rel="stylesheet"
          href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css"
          type="text/css">
    <!--
    Redraw the map of the above location at zoom levels 5, 15, and 20. Do this by simply changing the value of zoom
    level where the map properties are initially set and refresh the page to see the changes. Can the zoom be changed
    programmatically after the initial map is drawn?


    Create a popup with the name of the restaurant.

    Make sure the info window does not display until the marker has been clicked on.

    Refactor your code to display at least three of your favorite restaurants with information about each. Create an
    array of objects with information about each restaurant to accomplish this. Use a .forEach()
    loop rather than a for loop.-->
</head>
<body>

<div id='map' style='width: 80vw; height: 50vh;'></div>


<script src="js/keys.js"></script>
<script>

    // Creates the map
    mapboxgl.accessToken = MB_KEY;

    //code to run different zooms on refresh
    let zoomOnRefresh = [5, 15, 20];
    let randomIndex = Math.floor(Math.random() * zoomOnRefresh.length);
    let randomNumber = zoomOnRefresh[randomIndex];


    const map = new mapboxgl.Map({

        container: 'map', // container ID
        style: 'mapbox://styles/mapbox/streets-v12', // style URL
        center: [-95.38042, 29.73840], // starting position Houston
        zoom: randomNumber// starting zoom
    });

    //Adds a search bar to the map
    map.addControl(
        new MapboxGeocoder({
            accessToken: MB_KEY,
            mapboxgl: mapboxgl
        }));

    //Gives you zoom control on the map
    map.addControl(new mapboxgl.NavigationControl());


    //Add a marker to the map
    const marker = new mapboxgl.Marker()
        .setLngLat([-95.38042, 29.73840])
        .addTo(map);


    //Clicking on the marker gives you the popup
    const breakFast = new mapboxgl.Popup()
        .setHTML("<p>Welcome to Breakfast Klub!</p>");

    marker.setPopup(breakFast);
</script>
</body>
</html>